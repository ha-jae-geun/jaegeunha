# 문제
```java
문 2. 공개키기반구조(PKI)에서 관리나 보안상의 문제로
폐기된 인증서들의 목록은?
1 Online Certificate Status Protocol
2 Secure Socket Layer
3 Certificate Revocation List
4 Certification Authority

답 3
3 Certificate Revocation Rist(CRL, 인증서 폐기 목록)
CA(인증기관)이 발행
• 인증서 취소 사유
사용자 개인키가 노출되었거나 훼손된 경우
CA 가 사용자를 더 이상 인증해줄 수 없는 경우
CA 의 인증서가 노출되었거나 훼손된 경우
1 Online Certificate Status Protocol(OCSP, 온라인 인증서 상
태 프로토콜)
공개키 인증서의 폐지나 효력 정지 상태를 실시간으로 검
증할 수 있는 프로토콜
2 Secure Socket Layer(SSL)
인터넷 상에서 데이터를 안전하게 전송할 수 있도록 해주
는 프로토콜이다.
4 Certification Authority(CA, 인증기관)
공개키 인증서와 인증서 폐기목록을 생성하고 발급


다음 설명을 모두 만족하는 공개키 기반구조 (PKI)의
구성요소는?
◦ LDAP을 이용하여 X.500 디렉터리 서비스 제공
◦ 인증서와 사용자 관련 정보, 상호 인증서 쌍, CRL
등을 저장하고 검색하는 데이터베이스
1 사용자(user)
2 저장소(repository)
3 등록기관(registration authority)
4 인증기관(certification authority)

답 2
2 저장소(Repository)
공개된 저장소 역할 (저장 및 검색 등)
DAP 및 LDAP 등을 이용하여 X.500 디렉터리 서비스를 제공
<오답 체크> 3 등록 기관(RA, Registration Authority)
인증기관과 사용자 사이에서 사용자 신분 확인, 인증서 발급을
중개, 전달한다.
신원확인, 고객데이터 유지 등 인증기관의 확인 업무를 대행하며,
사용자의 인증서 발급 요청을 등록한다.
4 인증 기관(CA, Certification Authority)
공개키 인증서와 인증서 폐기목록을 생성하고 발급한다.
공개키에 대한 공신력있는 인증기관


7. 공개키 기반구조(Public Key Infrastructure, PKI)를 위
한 요소 시스템으로 옳지 않은 것은?
1 인증서와 인증서 폐지 목록을 공개하기 위한 디렉토
리
2 사용자 신원을 확인하는 등록기관
3 인증서 발행업무를 효율적으로 수행하기 위한 인증
기관 웹 서버
4 인증서를 발행 받는 사용자(최종 개체)

답 3
3 보통 공개키 기반구조의 구성요소로는 인증서, 인증기관
(CA), 등록기관(RA), 저장소(디렉터리), 사용자를 말하며, 웹
서버는 포함되지 않는다.
※ 공개키 기반구조(PKI) 구성 요소
• 인증서(Certificate)
공개키나 공개키의 정보를 포함하는 인증서
주로, X.509 v3 표준 형식에 기반함
• 인증 기관(CA, Certification Authority)
공개키 인증서와 인증서 폐기목록을 생성하고 발급한다.
공개키에 대한 공신력있는 인증기관
• 등록 기관(RA, Registration Authority)
인증기관과 사용자 사이에서 사용자 신분 확인, 인증서 발
급을 중개, 전달한다.
신원확인, 고객데이터 유지 등 인증기관의 확인 업무를 대
행하며, 사용자의 인증서 발급 요청을 등록한다.
• 저장소(Repository)
공개된 저장소 역할 (저장 및 검색 등)
DAP 및 LDAP 등을 이용하여 X.500 디렉토리 서비스를 제
공
• 인증서 관리 시스템
• 사용자(Client)


암호 시스템의 키 관리에 대한 설명으로 옳은 것은?
1 X.509 인증서는 개인키를 포함한다.
2 PKI(Public Key Infrastructure) 환경에서 사용자는
공개키를 생성하여 배포한다.
3 대칭키를 사용하는 환경에서 키 배포 센터와 구성원
간의 통신은 세션키를 사용한다.
4 PKI 환경에서 공개키 암호를 이용할 경우
CA(Certification Authority)는 인증서를 발급 한다.

답 4
4 인증기관(CA)는 인증서를 생성, 발급, 폐지를 담당한다.
등록기관(RA)는 인증기관과 사용자 사이에서 사용자 신분
확인, 인증서 발급을 중개, 전달한다.
<오답 체크> 1 개인키는 사용자 본인만 가지고 있어야 한다.
따라서 인증서에 포함되어서는 안 된다.
인증서에는 공개키가 포함된다.
2 공개키는 사용자가 직접 생성하여 인증기관에 등록하거나,
인증기관에 공개키 생성을 의뢰할 수도 있다.
하지만 공개키의 배포는 사용자가 직접 하지 않고, 인증기
관에서 담당한다.
3 키 배포 센터(KDC, Key Distribution Center)와 구성원 간의
통신에는 대칭키를 사용한다.
구성원들 간 통신을 할 때, 키 배포 센터로부터 세션키를
발급받아 사용한다.
구성원이 키 배포 센터(KDC)에 세션키를 요청하면, KDC 는
세션키를 생성하여 이를 대칭키로 암호화한 뒤 구성원에게
전달한다. 구성원은 KDC 로부터 받은 키를 복호화하여 세
션키를 획득한 뒤, 구성원들 간의 통신에 사용한다.


공인인증서는 공개키와 소유자를 연결시켜주는 전자
문서로 오늘날 사용되는 대부분의 인증서는 X.509
인증서(버전3)를 표준으로 따른다.
2 공인인증서의 기본 영역은 버전, 일련번호, 서명 알
고리즘, 발급자, 주체, 주체키 식별자, 기관 정보 액
세스, 키 사용 용도, 인증서 정책 등을 포함하고 있
다.
3 누구나 사용자의 인증서를 획득하고, 공개키를 획득
할 수 있으며 누구나 자유롭게 인증서를 수정/발급
할 수 있다.
4 인증서 폐기 목록은 보통 폐기된 인증서에 관한 정
보만 유지하는데, 이를 나쁜 목록(bad-list) 방법이
라고 한다. 나쁜 목록 방법은 좋은 목록(good-list)
방법보다 안전하지만 상대적으로 용량이 매우 크다.

답 1
1 X.509는 공인인증서 관련한 표준이며, 대부분의 인증서가 이 표
준을 따르고 있다.
<오답 체크> 2 주체키 식별자, 기관 정보 액세스, 키 사용 용도,
인증서 정책은 인증서 확장 영역에 해당한다.
◈ 인증서의 기본 영역
(1) 버전 (2) 일련번호
(3) 서명 알고리즘 (4) 발급자
(5) 유효기간 (6) 주체
(7) 공개키
◈ 인증서의 확장 영역
(1) 기관 키 식별자 (2) 주체 키 식별자
(3) 주체 대체 이름 (4) CRL 배포 지점
(5) 기관 정보 액세스 (6) 키 사용 용도
(7) 인증서 정책 (8) 손도장 알고리즘
(9) 손도장

3 인증서 발급은 인증 기관(CA)이 담당한다.
4 인증서 폐기 목록은 용량과 속도, 효율성 때문에 대부분 나쁜 목
록(bad-list) 방법을 사용한다. 다만 나쁜 목록 방법은 좋은 목록
방법에 비해 상대적으로 안전성이 떨어진다.
건물에 출입하는 인원을 통제할 때, 출입증을 가진 인원만 허용
하는 경우(good-list)와 위험 인물로 등록된 인원을 제외한 모두
를 허용하는 경우(bad-list) 중 어느 경우가 더 안전한지를 생각
해보면 된다. 나쁜 목록 방법에서는 아직 위험 인물로 알려지지
않은 경우는 통제할 수 없기 때문이다.


X.509 인증서(버전 3)의 확장(Extensions) 영역에 포함되지
않는 항목은?
1 인증서 정책(Certificate Policies)
2 기관 키 식별자(Authority Key Identifier)
3 키 용도(Key Usage)
4 서명 알고리즘 식별자(Signature Algorithm Identifier)
 기본 영역
∘ 버전(Version) ∘ 일련번호(Serial Number)

∘ 알고리즘 식별자(Algorithm Identifier) 
∘ 발행자(Issuer) ∘ 유효 개시시간(Validity From) ∘ 유효 만기시간(Validity To) ∘ 주체(Subject) 
주체 공개키 정보(Subject Public-Key Information) ∘ 알고리즘(Algorithm) ∘ 서명(Signature)

 확장 영역
∘ 키와 정책 정보(key and policy information) - 기관키 식별자(authority key identifier)
- 사용자키 식별자(subject key identifier)
- 키 사용(key usage) - 인증서 정책(certificate policies) ∘ 사용자와 발행자 속성(subject and issuer attribute) 
- 사용자 대체 이름(subject alternative name) - 발급자 대체 이름(issuer alternative name) 
∘ 인증 경로 제약조건(certification path constraints) - 기본 제한(basic constraints) 
- 이름 제한(name constraints) - 정책 제한(policy constraints)
4 서명 알고리즘 식별자는 기본 영역에 포함된다. 4
```

# [CRL LDAP(Certificate Revocation List)](https://rsec.kr/?p=386)
* 기존에는 CRL (Cerficate Revocation List) 를 이용하여 인증서의 무결성 (Validation) 여부를 확인하였습니다. CRL이란 인증서 폐기 목록 입니다. 
* 다시말해 현재 사용중인 인증서가 만료된건지 정상인지를 판단 할 수 있는 신뢰 할 수 있는 인증서 폐기목록이라는 말이지요.
* 일반 DB에 비해 빠르다

## [LDAP](https://jabcholove.tistory.com/m/89)
* LDAP은 Lightweight Directory Access Protocol의 약자로, 인터넷 기반의 분산 디렉터리 서비스를 제공하는 공개된 프로토콜입니다. 인터넷 기반과 공개된 프로토콜은 쉽게 이해가 되는데, 분산도 애매하고, 디렉터리 서비스는 뭔지 쉽게 와 닿지 않습니다.

# OCSP
* 실시간으로 조회 가능(DB에 직접 접근)
* OCSP는 RFC2560에서 소개되었으며 목적은 인증서의 상태를 실시간으로 체크하기 위한 프로토콜이라고 보시면 되겠습니다. OCSP는 인증서의 시리얼을 통하여 실시간으로 인증서의 만료여부를 CA 인증서 DB에 직접 요청합니다. 이렇게 OCSP는 실시간으로 인증서의 만료여부를 확인 할 수 있으며 CRL과 같이 불필요한 목록을 모두 받아 볼 필요가 없어 그 속도가 빠릅니다.
* 간단하게 말해 OCSP는 인증서 폐지내역을 화이트리스트로 관린한다고 보시면 되겠습니다. OCSP프로토콜은 인증서의 시리얼을 포함하여 CA기관에 인증서 만료여부를 요청하게 되며



# 3. OCSP Stapling (Online Certificate Status Protocol Stapling)
* 위에서 살펴본 바와 같이 OCSP는 CRL의 단점을 매우 많이 개선하였습니다. 하지만 OCSP도 단점이 있는데, OCSP는 모든 클라이언트들의 인증서의 만료여부 확인 요청을 모두 처리해 주어야 한다는 것이지요.
* 만약 웹서버로 수많은 HTTPS 요청이 발생할 경우, 각 클라이언트에서 OCSP 서버로의 요청도 HTTPS 요청만큼 발생하게 되는 것이죠. 이는 보안상 취약점과 함께 웹사이트가 느려지는 문제가 발생하게 되며, 만약 OCSP가 과부하되어 응답을 하지 못할 경우 false warning 메시지와 함께 유저가 강제로 접속하거나 접속을 끊도록 선택해야 하는 상황이 발생하여 Secure Connection을 보장 해 줄 수 없는 상태가 되는것이죠. 하여 이와 같은 문제를 개선하기 위해서 OCSP Stapling 이라는 기술이 만들어졌습니다.
* 위의 화면과 같이 클라이언트가 직접 OCSP를 통하여 인증서 만료여부를 확인하는 것이 아니라 서비스를 제공하는 웹서버에서 중간에게 OCSP를 통한 인증서 만료여부를 중계하는 것이죠. 실제 인증서 만료여부는 중간자인 웹서버가 OCSP서버와 확인하도록 되어 있고, 클라이언트는 웹서버 접속시 웹서버를 통하여 인증서 만료여부까지 확인 하는 것이죠.
* 따라서 OCSP 서버 (OCSP Responder) 는 쿼리수가 현저하게 적어질 것이며 자원을 보호 할 수 있는 것이죠.


# [CA](http://www.ktword.co.kr/abbr_view.php?m_temp1=2123)
