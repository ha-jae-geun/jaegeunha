# 기본
* [블로그](https://dailyheumsi.tistory.com/137?category=855210)
* 먼저, 하나의 코드가 프로그램이 되고, 프로그램이 프로세스가 되는 과정은 다음과 같다.
* 코드 작성 -- (컴파일) --> 오브젝트 파일 -- (링킹) --> 실행 파일(=프로그램) -- (로드) --> 메모리 적재 및 수행(=프로세스)

```java
컴파일러
​ 사용자가 작성한 원시코드를 컴퓨터가 읽을 수 있는 형태의 오브젝트 파일로 만드는 프로그램

어셈블러
​ 어셈블리어 코드를 기계어 코드로 변환시켜주는 프로그램.
​ 명확히 말하면, 어셈블러는 큰 의미 컴파일러 내부에 속한다.
​ 큰 의미의 컴파일러는 사실 다음과 같이 구성된다.
​ (원시 코드) -> (컴파일러) -> (어셈블리어 코드) -> (어셈블러) -> (기계어 코드 = 오브젝트 코드)

링커
​ 프로그램이 되기 위해 여러 개의 오브젝트 파일과 라이브러리를 엮는 과정(링킹)을 수행하는 프로그램

로더
​ 사용자가 프로그램을 실행하면, 메모리에 적재하는 일(로드)을 수행하는 프로그램

```

# 종류
1. 정적 컴파일러
* 빌드타임: 모든 코드를 기계어로 변경하여 실행파일로 만들어줌
* 런타임: 단순히 실행파일을 메모리에 올려 실행
* 장점: 특정한 시스템에 맞춰 기계어를 내보내므로 시스템에 최적화된 성능을 낼 수 있음
* 단점: 시스템마다 각각 컴파일해야하며 모든 환경에서 같은 동작을 보장하지 않음

2. 인터프리터
* 빌드타임: 프로그래머가 작성한 코드는 건드리지 않음
* 런타임: 번역기를 실행하여 실시간으로 기계어로 해석하여 실행함
* 장점: 인터프리터만 시스템마다 있다면 코드의 호환성은 보장됨
* 단점: 실시간 해석이  필요하므로 컴파일러보다 느린 성능

3. JIT컴파일러
* 빌드타임: 최적화된 중간언어로 변환
* 런타임: 중간언어를 실행하는 전용 프로그램인 미들웨어로 해석하여 실행
* 실시간 번역에 따른 시스템 부하를 줄여 실행성능을 높이면서도 시스템간의 호환성이 높은 장점
  * 실행환경에 더욱 최적화된 추가적인 장점도 존재한다.
* 장점: 한 번 컴파일한 코드의 캐싱, 자주 사용되는 코드만 검출하여 컴파일(adaptvie compilation)
* 단점: 실행시에 중간언어를 컴파일하느라 실행시간이 다소 지연된다는 점


## 자바
```java
JIT 컴파일러의 JIT는 Just-In-Time 의 약자로, 말 그대로 하면, "그 순간" 컴파일러라는 뜻인데, 
사용할 때 컴파일한다는 의미이다. 무슨 말인지 모를 것이다

이 JIT Compiler는 자바에서 대표적으로 사용하고 있다.

( 요즘은 Platform Independent 가 대세이기 때문에 .NET 도, 브라우저도 사용한다. )


Java에서 Compile 을 하면 Bytecode 로 변환된다.

( 이는 수도없이 들어봤을 것이다. 하지만 제대로 이해하지 못했을 것이다.. ?? )

이 바이트코드는 기계가 바로 읽을 수 있는 형태가 아니며, 

이 바이트코드는 실제 실행될 때 다시 한번 기계가 읽을 수 있는 형태(native code)로 interpreter 를 
통해 해석이 되어야 한다.



이렇게 한번에 기계어로 변환하지 않고 두번의 과정을 밟는 이유는 

Java 의 최대 장점 중 하나인 machine-independent 특성때문이다. 

platform independent 라고도 하는데, 요건 한번 작성하면 어떤 기계에서든 돌릴 수 있다는 특성을 말한다.




프로그래머 입장에서는 "야호!" 를 부를 수 있는 특성으로, 이 특성때문에 자바가 참 잘나간다.

프로그래머들은 별 걱정없이 프로그램을 작성해서 byte code 로 컴파일을 하고, 

JVM( Java Virtual Machine ) 이 이 bytecode 를 해당 기계에 맞는 기계어로 다시 번역하는 작업을 하는 것이다. 
기계어로 변환하는 작업은 OS 와 CPU 에 dependent 하기 때문에, JVM 만드는 사람들만 새로운 OS 와 CPU 에 대해서 긴장하면 되는 것.


이 JVM이 bytecode -> 기계어로 interpret(해석) 할 때,

반복되는 내용은 컴파일을 해서 사용하곤 한다.( 한번만 컴파일된다. )

요 과정을 JIT 컴파일링이라고 한다.

JIT 컴파일링은 실행될 때 최초 실행되기 때문에, 최초실행에서는 조금 느릴 수 있다.



JIT 컴파일러를 사용하면, 컴파일 없이 Interpret만 하는 경우보다 반복적인 작업을 할 때 훨씬 높은 성능을 낼 수 있다. 

( Vtable 을 만들어서 링크하는 방식이라고 한다. )




Java 뿐만이 아니라 요즘은 브라우저에도 JIT 컴파일러가 들어있다.



```

```java
JIT 컴파일(just-in-time compilation) 또는 동적 번역(dynamic translation)은
 프로그램을 실제 실행하는 시점에 기계어로 번역하는 컴파일 기법이다.
 이 기법은 프로그램의 실행 속도를 빠르게 하기 위해 사용된다.

전통적인 입장에서 컴퓨터 프로그램을 만드는 방법은 두 가지가 있는데, 
인터프리트 방식과 정적 컴파일 방식으로 나눌 수 있다. 이 중 인터프리트 방식은 
실행 중 프로그래밍 언어를 읽어가면서 해당 기능에 대응하는 기계어 코드를 실행하며, 
반면 정적 컴파일은 실행하기 전에 프로그램 코드를 기계어로 번역한다.

JIT 컴파일러는 두 가지의 방식을 혼합한 방식으로 생각할 수 있는데, 실행 시점에서 
인터프리트 방식으로 기계어 코드를 생성하면서 그 코드를 캐싱하여, 
같은 함수가 여러 번 불릴 때 매번 기계어 코드를 생성하는 것을 방지한다.

최근의 자바 가상 머신과 .NET, V8(node.js)에서는 JIT 컴파일을 지원한다. 
즉, 자바 컴파일러가 자바 프로그램 코드를 바이트코드로 변환한 다음, 
실제 바이트코드를 실행하는 시점에서 자바 가상 머신이 바이트코드를 JIT 컴파일을 통해 기계어로 변환한다.
```

```java
JIT컴파일러는 프로그램이 실행될 때 기계어로 컴파일 하는 방식입니다.

사용하게 될 경우 CPU에 직접 관여하는 네이티브 코드(=기계어)를 작성하여 
프로그램을 구동시키며 프로그램의 동적(dynamic)인 실행환경(runtime)에 작동하기 때문에 
한번에 모든 내용을 컴파일하는 일반적인 컴파일러보다 빈번하게 컴파일이 발생합니다.
만약 이미 컴파일된 내용이라면 JIT이 다시 컴파일하지 않고 해당 컴파일된 코드를 사용합니다.



JIT은 실행할 때 컴파일을 한다는 점이 중요합니다. 기존의 컴파일된 프로그램은 
실행하려는 플랫폼(대표적으로 운영체제)에게 강한 종속을 받습니다. 만약 윈도우에서 
컴파일을 했다면 이 프로그램을 단순히 Ctrl-C, Ctrl-V하는 식으로는 리눅스에서 쓸 수 없습니다. 
프로그램이 리눅스에 필요하다면 리눅스에서 컴파일을 해야 합니다. 
(하지만 대부분의 경우 코드를 다시 짜는 일이 발생하는데, 이는 시스템 콜이 다르기 때문입니다. 
간단한 콘솔 프로그램이라면 큰 변화가 필요없지만, UI가 들어가고 시스템에 관련되는 
활동이 생기는 경우에는 프로그램이 절대 호환되지 않습니다.)



JIT은 기존의 컴파일 방식의 문제점을 중간에서 플랫폼에 맞게 변경해주는 방식으로 해결했습니다. 
컴파일이라는 이름답게 속도 역시 기존 방식으로 컴파일된 프로그램들과 크게 차이나지 않습니다. 
JIT을 인터프리터 언어에 적용할 경우, 인터프리터 언어가 가진 유연한 플랫폼 특성과 컴파일 
방식 특유의 빠른 속도를 모두 가질 수 있습니다.





하지만 JIT이 만능은 아닙니다. JIT을 사용하게 될 경우 컴파일을 실행시간에 하기 때문에 프로그램과 
컴파일이 동시에 이뤄집니다. 다르게 생각해보면 컴파일할 때 필요한 자원을 실행시간에 공유하게 된다는 
의미인데, 심각하리만큼 큰 단점은 아니지만 프로그램의 작업 환경에 따라 중요한 문제로 다가올 수 있습니다. 
(제 3국가에서 쓰는 저가형 컴퓨터, 또는 임베디드 시스템. 근데 임베디드에서 이런 걸 쓸 리
없어보이는데 임베디드 자바를 생각하면 아닌 것 같기도 하고.)



```
