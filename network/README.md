# 네트워크
*   네트워크는 미리 정의된 규약인 프로토콜로 정보를 주고받는 하드웨어와 소프트웨어 기반의 시스템을 의미한다.

## 프로토콜 설명

## OSI 7계층 

## IP 주소 설명, 종료

# TCP, UDP 차이
## TCP
[TCP]('https://www.youtube.com/watch?v=8Ql1l048MD8&list=PLVsNizTWUw7GZy4UA9pntGRC9IIXIYiHm&index=3')
*  TCP is on IP
* physical -> internet -> transport -> application
* Ethernet Protocol <> IP Protocol <> TCp Protocol <> HTTP Protocol
* 소켓은 전송 레이어에 있음  
  ^Socket is on the transport  
  - Kernel - driver - network card - network card - kernel
  - BSD socket 
  - 소프트웨어 연결
  - Create socket -> give port > connect ip/port
  - Socket server: socket() > bind > listen > accept > send > recv
  - Socket client: socket() >                connect > recv > send > close
* ethernet ->     ip   ->    TCP    ->    Web server
* 프로세스 사이에서 소통을 도와줌  
    ^It provides communication function between processes
* 3웨이 핸드쉐이크 사용  
  ^Threeway handshake, based on flow
* 장점: 신뢰성
* 단점: 낮은 성능, 데이터 연속성 유지 힘듬  
    ^cons: low performance, hard to stay data continuity -> reliability is more important
* segment


## UDP
* 연속성이 신뢰성보다 중요함; 스타크래프트 UDP 서버  
  ^continuity is more important than reliability -> fast(ex: starcraft)
  - 손실에 신경쓰지 않는다.  
    ^don't care about loss
* 높은 성능  
    ^High performance
* socket() -> connect() -> sentto()/recvfrom () -> close()


# 토렌트
* 장점
  1. 인기많은 파일도 안정적인 성능 보장
  2. 먹튀 현상 방지 알고리즘

* 일반 서버-클라이언트 방식과 달리 P2P 방식은 중앙 서버가 없고 트래커, 시드자가 서버 역할
* 시드(트래커; 최초 유포자) - 시드 - 리치(leech; 두번째 뜻: 거머리; 다운로드 하고 시드 안하고 도망)
  * 트래커는 리치에게 다른 시드자의 주소도 줌; 주소가 가까우면 다운로드 속도가 빠르니 
* 먹튀 스코어 계산: Choke Algorithm; 한 시드자는 4명의 리치에게 다운로드하게 할 수 있는데 업로드 비율이 낮은 사용자에게는 우선순위에서 제한이 될 확률이 높다.
* 단점
  * SSD는 P/E Cycle(쓰기 횟수 제한)이 있는데 장기적으로 저장장치에 무리를 줄 수 있다.
* 불법 콘텐츠에 대해 업로드/다운로드 모두 처벌


# 외부에서 내부 라우터로 접근
* 1. 포트 포워드 - VPN으로 테스트(프록시 자동)
* 2. TeamViewer


# DNS
* DNS 값을 IP로 변환 -> Socket(IP, Port) -> IP가 맥주소로 변환 


# NAT
* 자신의 네트워크를 만듭니다. Nat는 내부 및 외부와 통신하는 도구입니다.  
    ^it makes it own network. Nat is a tool to make communicate with inside and outside 

# Bridge
* 개인 IP 주소를 제공합니다. 그래서 많은 IP 주소가 필요하다.  
    ^it gives personal IP address. So i need a lot of ip addresses


# router
* DHCP, DNS

## wifi
* DHCP, DNS, switch

## UNC Route
* [Network](http://miniyo78.tistory.com/entry/UNC-%EA%B2%BD%EB%A1%9C)

## Netbios
* 컴퓨터 속성 -> 이름 변경 -> 자세히에서 확인 가능  
    ^Computer properties -> change name -> detail
* 윈도우에서만 해당  
    ^Only in Window OS

# 가상 네트워크
## Host-Only
* 외부와 단절된 내부 네트워크 구축하는 것으로 구성된 가상머신들끼리만 통신이 가능합니다.

## NAT(Network Address Translation)
* 호스트PC로부터 IP를 할당 받아 가상머신 프로그램이 자체 DHCP서버를 띄워 내부 네트워크 대역 할당 및 통신을 합니다. 호스트PC를 통해 외부 네트워크와 통신이 가능합니다.
- 즉, 사설 IP 주소로는 원칙적으로 외부와 통신할 수 없기 때문에 이를 공인 IP 주소로 중간에 변환해 주어 외부와 통신(인터넷 연결) 할 수 잇게 해주는 것입니다. 한가지 NAT는 장비가 아니라 기능 즉, 프로그램을 의미합니다. 그래서 라우터 등에 NAT 기능이 포함되어 있습니다. 흔히 NAT 기능이 포함된 라우터를 NAT 라우터라고 부릅니다.
- 우리가 주변에서 흔히 볼 수 있는 NAT 라우터로는 바로 인터넷 공유기가 있습니다. 공유기는 허브/스위치의 역할도 하면서 동시에 NAT 기능을 탑재하여 우리가 하나의 인터넷 회선으로(공인IP) 다수의 컴퓨터에서(내부 사설 IP) 동시에 인터넷을 사용할 수 있게 해주는 것 입니다. NAT 를 가장 쉽게 이해하시는 방법은
* NAT = 인터넷 공유기 라는 공식을 대입시키시면 됩니다.

## Bridge
* 공유기로부터 IP를 할당 받아, 호스트PC와 동일한 네트워크 대역의 IP를 갖게 됩니다. 공유기를 통해 외부 네트워크와 통신이 가능합니다.
* Host-only로 구성된 내부 네트워크 내의 가상머신4에 NAT연결선을 추가한 후 가상머신4를 게이트웨이로 사용하면, 가상머신1,2,3에서도 외부 네트워크로 접속할 수 있습니다. <포트 포워딩 필요>




# IP
* ㆍIP 는 에 대한 주소를 가진다 IP  주소는 네트워크에서 장치들이 서로를 인식하고 통신을 하기 위해서 사용하는 특수한 번호이다 IP . 네트워크에 연결된 장치는 모든 기계는 를 가지고 있어야 한다 
* 네트워크 구조를 유지시키는 역할  
    ^to stay the network structure
* IP 부여 -> 내가 원하는 곳으로 루트 선정  
    * Give ip address > set route to node that i want
    * 1988년 IANA; Internet Assigned Numbers Authority; 현재 ICANN(미국 LA)이 요청에 따라 APNIC에게 나눠줌 ->  한국의 국가기관(KRNIC)에서 발급 -> SK/KT/LG -> 가정집에 1개 부여 -> 공유기에 따라 분배(외부에서 안보이는 나만 보이는; 192.168.0. 가상 IP; 밖에서 봤을 땐 하나의 IP)
      * 대륙마다 기관이 다름: APNIC(호주에 위치; 한국 포함), RIPE(NCC), AFRINIC(아프리카), LACNIC(남미), ARIN(북미)
      * 홈페이지: KRNIC 홈페이지에서 확인 가능

## IP 형태
* 고정 IP: 고정 는 컴퓨터에 고정적으로 부여된 로 한번 부여되면 를 반납하기 전까지는 다른 장비에 IP IP IP 부여할 수 없다. 고정 는 일반 전화기라고 생각하면 된다 IP . 
* 유동 IP: 유동 는 장비에 고정적으로 를 부여하지 않고 컴퓨터를 사용할 때 남아 있는 중에서 IP IP IP 돌아가면서 부여한다. 유동 는 공중 전화기라고 생가하면 된다 IP . 
* 사설 IP:  사설 는 사용자가 임의로 부여한다 IP . 사설 는 내부적으로 인터넷 환경처럼 사용할 수 있지만 인터넷 상에서 서로 연결되지 않도록 IP 되어 있다. 사설 는 내부 전화기라고 생각하면 된다 IP .

## 내 IP 확인 방법
* 구글에서 MY IP 검색

## IP Tracker
* 추적 가능: 도시, 동 + 대략적 위치 좌표, 인터넷 가입 회사, 인터넷 속도, 인터넷 브라우저, 시간


## IP 가리기

### 프록시
* 처음: 속도를 위해 나왔다. 이미 빨라진지금 보안을 위해서 사용. (프록시에 사용자마다의 캐쉬가 등록)
* 사용자 - 프록시(프록시만의 IP; ex)2.2.2.2) - 인터넷

### VPN
* 사용자 - AES(보안) - VPN - 인터넷
* 암호화 기능 보유; VPN에서 복호화/암호해독 시전

### 토르 브라우저


# DHCP
- 필요한 이유: DHCP가 필요한 이유는 무엇보다 네트워크의 IP 주소 관리를 간소화하기 위해서다. 호스트 2개가 같은 IP 주소를 보유할 수 없으므로, IP 주소 수동 설정 시 오류가 발생할 가능성이 높다. 소규모 네트워크라도 수동으로 IP 주소를 할당하면 문제가 발생할 수 있다. 특히, 비정기적으로 IP 주소가 필요한 모바일 디바이스라면 더욱 그렇다. 또한, 일반 사용자 중 문제가 발생했을 때 컴퓨터의 IP 주소 정보를 찾아 바꿀 수 있는 사람도 많지 않다. 따라서 이 과정을 DHCP로 자동화하면 사용자와 네트워크 관리자 모두 업무가 편리해진다.

## 구성요소
DHCP 서버: IP 주소 및 관련 설정 정보를 보유한 DCHP 서버를 작동하는 네트워크 디바이스. 일반적으로 DHCP 서버는 서버 또는 라우터를 의미하지만, 호스트로 작동할 수 있다면 별도의 제한이 없다. SD-WAN 어플라이언스가 대표적이다.
- DHCP 클라이언트: DHCP 서버에서 설정 정보를 전송 받는 엔드포인트. 컴퓨터, 모바일 디바이스, IoT 엔드포인트 및 네트워크 연결 장비 등이 있다. DHCP 클라이언트 대부분은 DHCP 정보를 자동 수신할 수 있도록 지원한다.
- IP 주소 풀: DHCP 클라이언트에서 이용할 수 있는 IP 주소의 범위. 일반적으로, 모든 IP 주소는 순차적으로 배포한다.
- 서브넷: IP 네트워크를 서브넷으로 알려진 세그먼트로 나눌 수 있다. 서브넷으로 네트워크를 관리할 수 있다.
- 대여(Lease): DHCP 클라이언트가 IP 주소 정보를 보유할 수 있는 시간. IP 주소 대여가 만료되면 클라이언트가 갱신해야 한다.
- DHCP 릴레이: 네트워크에서 브로드캐스트 된 클라이언트 메시지를 수신 받은 뒤, 설정된 서버로 전달하는 라우터 또는 호스트. 그 후에 서버는 클라이언트에 반응 값을 전송하는 릴레이 에이전트로 되돌려 보낸다. 이 때문에 각 서브넷에 서버를 보유하지 않고도 DHCP 서버를 중앙 집중할 수 있다.

## 장점
- 정확한 IP 설정: IP 주소 설정 매개변수 값은 정확해야 하지만, '192.168.159.3' 같은 형식이어서 입력시 실수가 발생할 가능성이 높다. 이런 오타는 해결하기 힘든 고질적 문제인데, DHCP 서버를 사용하면 문제를 최소화할 수 있다.
- IP 주소 충돌 감소: 연결된 디바이스라면 IP 주소를 보유해야 한다. 하지만, 각 IP 주소는 한 번만 사용할 수 있으므로 중복 시 충돌이 발생해 중복된 디바이스 일방 또는 양방의 연결이 해제될 수 있다. IP 주소를 수동으로 할당하거나 특히 모바일 디바이스처럼 주기적으로 연결해야 하는 다수의 엔드 포인트가 있을 때 이런 문제가 발생할 가능성이 높다. DHCP를 사용하면 각 IP 주소가 자동으로 한 번만 사용된다.
- IP 주소 관리 자동화: DHCP를 사용하지 않으면 네트워크 관리자가 수동으로 IT 주소를 할당, 철회해야 한다. 디바이스가 언제 네트워크에 접속되고 끊기는지 정확하게 파악하기는 사실상 불가능하므로, 어떤 디바이스가 특정 주소를 보유하고 있는지 일일이 추적하는 것도 불가능하다. 반면 DHCP를 이용하면 네트워크 전문가가 단일 위치에서 모든 기기를 관리할 수 있도록 자동화 및 중앙집중화해 준다.
- 효율적인 변경 관리: DHCP를 사용하면 IP 주소, 범위, 엔드 포인트의 변경이 매우 쉽다. 예를 들어 DHCP를 통해 IP 주소 지정 시스템을 변경한다고 하자. 새로운 IP 주소 정보로 DHCP 서버를 설정한 뒤 해당 정보를 새로운 엔드 포인트에 전파하면 끝이다. 이와 유사하게, 네트워크 디바이스를 업그레이드 또는 교체할 때도 네트워크 설정을 별도로 할 필요가 없다.

## 단점
- DHCP 프로토콜은 인증 과정이 없으므로, 어떤 클라이언트도 빠르게 네트워크에 접속할 수 있다. 그러나 바로 이 점 때문에 다양한 보안 문제를 수반한다. 예를 들어 비인증 서버를 통한 클라이언트 유해 정보 배포, 비인증 클라이언트에 IP 주소 전달, 비인증 또는 유해 클라이언트로 인한 IP 주소 고갈 등이다.
- 이밖에도 클라이언트가 DHCP 서버의 진본성을 입증할 수 있는 수단을 보유하고 있지 않으므로, 부정확한 네트워크 정보를 제공하기 위해 인위적 수단을 써야 한다. 이로 인해, 서비스 거부 공격(DoS) 또는 중간자 공격이 발생할 수 있다. 즉, 가짜 서버가 악의적인 용도로 사용될 수 있는 자료를 중간에서 가로챌 가능성이 있다.
- 또한, DHCP 서버가 클라이언트 증명 시스템을 자체 보유하고 있지 않기 때문에, 요청한 디바이스에게 IP 주소 정보를 배포할 수밖에 없다. 그에 따라, 악의적 이용자가 크리덴셜(credential)을 지속해서 변환하기 위해 클라이언트를 설정할 수 있을 뿐만 아니라, 영역 내에서 이용할 수 있는 모든 IP 주소를 순식간에 고갈시킬 수 있다. 이는 기업의 정상적인 업무용 엔드 포인트가 네트워크에 접속하는 것을 방해할 것이다.
- 이에 따라 보안 위험을 낮추는 방법도 속속 등장하고 있다. 예를 들어 릴레이 에이전트 정보 옵션(Relay Agent Information Option)은 엔지니어가 DHCP 메시지가 네트워크에 도착했을 때 태그화를 지원한다. 태그는 네트워크 접속을 관리하는 용도로 사용할 수 있다. DHCP 메시지를 입증할 수 있는 수단도 있다. 단, 복잡한 키 관리 때문에 채택이 어려워진다는 단점이 있다. 그 외에도 DHCP의 보안을 강화하기 위해 802.1x 인증 방식(망 접근제어, Network Access Control, NAC)을 사용할 수 있다. 주요 네트워크 업체가 NAC 지원을 통해 배치 과정을 크게 간소화하고 있다. ciokr@idg.co.kr

# DNS
* DNS 값을 IP로 변환 -> Socket(IP, Port) -> IP가 맥주소로 변환 
- 전화 안내 서비스인 114와 같은 역할
- 윈도우에서 nslookup 으로 도메인과 IP주소 알 수 있음.
- 과정: URL 검색 -> URL 질의 -> 해당 URL의 IP 주소 알려줌


# UNC Route
* [Network](http://miniyo78.tistory.com/entry/UNC-%EA%B2%BD%EB%A1%9C)
- UNC 경로는 네트워크상의 공유자원에 연결할 때 사용하는 규칙이다. UNC 경로는 항상 \\Server_name\Share_name 형태로  \\는 데이터가 네트워크에 있다는 것을 의미한다.
- Server_name에는 연결할 서버의 컴퓨터 이름을 입력해야 하며 Windows Server 2003에서 컴퓨터 이름은 NetBIOS, DNS, IP 형식 등으로 입력할 수 있다

# 라우터
1. Static Routing 
- Static Routing은 말 그대로 정적인, 즉 사람이 일일이 경로를 수동으로 결정해줘야 하는 라우팅 프로토콜을 의미합니다. static의 경우 일일이 사람이 경로를 설정해줘야 하기 때문에 장애가 발생했을 때 능동적으로 대처할 수 없는 단점이 있습니다. 하지만 자신이 원하는 경로를 직접 설정할 수 있고, 외부에 경로 정보를 알릴 필요가 없기 때문에 보안적인 측면에서 장점을 갖습니다. 


- (라우터는 원래 라우터끼리 라우팅 테이블을 주고 받으며 경로 정보를 서로 업데이트 합니다.)


2. Dynamic Routing
- ﻿Dynamic Routing은 말 그대로 그 때 그 때 동적으로 최적의 경로를 결정하는 라우팅 알고리즘을 의미합니다. 잘 알려진 라우팅 프로토콜 대부분이 바로 Dynamic 라우팅에 속합니다. RIP, OSPF, IGRP, EIGRP 등...
- 사람이 일일이 경로를 설정해주지 않아도 되고, 자동으로 경로에 대한 정보를 업데이트 하기 때문에 장애가 발생했을 때 경로 결정에 대해 능동적으로 대처할 수 있습니다. 하지만 시간이 지날 때마다 바뀐 정보는 없는지 확인해야 하고 새로운 경로를 계산해야 하는 등 라우터 자체에 부담을 많이 주는 단점이 있습니다.

## 라우터의 기능
- 경로 설정(Path Determination): 데이터 패킷이 출발지부터 목적지까지 갈 수 있는 경로를 검사하고 어떤 경로로 가는 것이 최선인지 결정
- 스위칭(Switching): 경로 설정이 결정될 경우 데이터 패킷 스위칭 작업을 함


## 포트
- Ethernet: 내부 네트워크 간 접속시에 사용되는 인터페이스
- Serial: WAN(Wide Area Network) 접속을 위해 사용되는 인터페이스
- 같은 종류의 포트가 많아질수록 포트는 보통 0/0, 0/1, 0/2, 0/3... 순으로 증가한다. (예 : f0/0, f0/1, f/2...)
- 인터페이스에 따라 연결가능한 케이블(선)의 종류에 유의해야한다. (예: 라우터와 라우터 연결은 크로스오버 케이블)

## AS(Autonomous System)
- 네트워크 관리자에 의해 관리되는 라우터들의 집단을 하나로 생각하는 것
- 예를들어 K사라는 ISP업체의 라우터들을 관리자에 의해 설정되었다면 그 K사의 라우터들은 하나의 AS가 된다.
- AS는 ASBR(Autonomous System Boundary Router)이라는 문지기 라우터를 통해 인터넷으로 나가게 된다.
- ASBR은 자신의 AS와 인접해 있는 다른 AS에 대한 정보를 가지며 밖으로 나가는 AS나 자신의 AS쪽으로 들어오는 ASBR 라우터에게 정보를 제공한다.
- 따라서 AS 내의  라우터들은 인터넷에 접속하기 위해 이 세상의 모든 네트워크 정보를 가지고 있을 필요가 없고 단지 자신의 AS정보만 가지면 된다.

## Interior Gateway Protocol (IGP)
- AS안에서 운영되는 라우팅 프로토콜로서 RIP, IGRP, OSPF, EIGRP 등이 있다.
 
## Exterior Gateway Protocol (EGP)
- AS 간 연결하는 라우팅 프로토콜로서 EGP, BGP 등이 있다.


# Netbios
-  OSI 모형의 세션 계층에 관련된 서비스들을 제공하여 개개의 컴퓨터의 애플리케이션들이 근거리 통신망을 통해 통신할 수 있게 한다. "세션 지향" 의 통신 서비스를 제공한다. 세션 지향은 먼저 두 컴퓨터 사이에서 통신을 확립하고 서로 통신이 가능한 방식.전화처럼 먼저 전화 해 상대에 연결하고 통신하는 형태의 서비스. 일대일 통신이 가능하다.
- 일반적으로 TCP / IP 네트워크에서 사용하는 기기에 고유한 "IP 주소"를 부여하면 서로 문제없이 통신을 할 수 있습니다. TCP / IP 네트워크에서는 IP 주소만 있으면 이름이 부여되지 않아도 서로 통신을 할 수 있기 때문입니다. 하지만 Windows OS의 경우는 차이점이 있습니다. Windows 네트워크에서는 "NetBIOS (Network BIOS)"라는 기술이 사용되고 있으며, IP 주소보다 "컴퓨터 이름 (정확하게는 NetBIOS 이름)"이 중요한 역할을 하고 있습니다.
* 컴퓨터 속성 -> 이름 변경 -> 자세히에서 확인 가능  
    ^Computer properties -> change name -> detail
* 윈도우에서만 해당  
    ^Only in Window OS

## 과정
- 1. 시스템 시작 시 NetBIOS 이름 등록 기능을 사용하여 네트워크에 참여합니다.
2. NetBIOS 이름을 사용하여 통신 상대를 식별하고 통신 패킷을 보내는 작업을 반복합니다.
3. 시스템 종료 시 NetBIOS 이름 등록을 삭제하고 네트워크에서 이탈합니다.

