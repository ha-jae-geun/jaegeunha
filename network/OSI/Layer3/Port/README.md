# DDNS
* 도메인과 호스트의 IP를 지속적으로 

# 포트
```java
- 포트는 "논리적인 접속장소"이며, 특히 인터넷 프로토콜인 TCP/IP를 사용할 때에는 클라이언트
프로그램이 네트워크 상의 특정 서버 프로그램을 지정하는 방법으로 사용이 됩니다. 

웹 프로토콜인 HTTP와 같이, TCP/IP의 상위 프로토콜을 사용하는 응용프로그램에서는 미리 지정된 
포트번호 들을 가지고 있으며, 이런 것들은 IANA(Internet Assigned Numbers Authority)에 의해 지정되었으며,
"잘 알려진 포트들"이라고 불리워 집니다.


 
다른 응용프로그램 프로세스들은 매번 접속할 때마다 포트번호가 동적으로 부여됩니다. 서버 프로그램이 처음 시작되면, 
지정된 포트번호로 바인드되는데, 이 서버를 사용하려는 모든 클라이언트 프로그램들은 지정된 포트번호에 바인드해야만 합니다.

 

바인드가 되면 두 개의 컴퓨터간 네트워크를 이용한 통신 시, 발신지 컴퓨터에서 출발한 사용자 데이터(패킷)는 TCP/IP의 
각 계층을 거치면서 최종적으로 목적지 주소(IP)를 가지고 있는 컴퓨터에 도착하게 됩니다. 패킷을 수신한 컴퓨터는 전송 
시에 사용되었던 주소필드를 제거하고, 패킷 안에 있는 데이터만을 응용프로그램에 넘겨주게 됩니다.

 

결국 데이터를 넘겨줄 컴퓨터에는 FTP, Mail, Telnet, SSH, Web 등 다양한 종류의 응용프로그램이 기동하고 있을 것인데, 
수신측 컴퓨터가 인터넷 계층에서 패킷을 수신한 후 응용계층으로 데이터를 전달하려고 할 때, 컴퓨터 내에 사용중인 많은 
응용프로그램들 중 누구에게 데이터를 전달해야 하는지 구분하기 위하여 운영체제는 응용프로그램의 논리적인 주소인
Port 번호라는 것을 이용합니다. 즉 각각의 응용프로그램 (서비스)에 유일한 논리적 주소인 Port 번호를 할당하여, 
전송계층에서 응용프로그램을 구분할 수 있도록 합니다.

 

(IP Address, Port) -> IP Address는 컴퓨터를 찾을 때 필요한 주소를 나타내며, Port는 컴퓨터 안에서 프로그램을 
찾을 때 를 나타내는 것입니다.

즉, 두 개를 이용하여 특정 컴퓨터의 프로그램을 이용 할 수 있게 됩니다.



```


# 포트 포워딩
* 포트 포워딩 또는 포트 매핑은 컴퓨터 네트워크에서 패킷이 라우터나 방화벽과 같은 네트워크 게이트웨이를 가로지르는 동안 하나의 IP 주소와 포트 번호 결합의 통신 요청을 다른 곳으로 넘겨주는 네트워크 주소 변환의 응용이다.

```java
내부네트워크 또는 네트워크에 연결되지 않은 하나의 호스트만 사용하는 서비스들이라면 필요가 없는 기능입니다.



그러나 자주거론되는 이유는 과거와 다르게 IT의발달로 인하여 외부에서 제공하는 서비스등을 제공 받거나 제공해주기 
위하여 개발되었기 때문이죠



또 공유기에 하나의 호스트만 붙어있질 않습니다.



스마트폰을 이용하여 무선공유기에 접속을 하여도 호스트가 되는거죠



그리고 내부 IP는 특별한 작업을 거치지 않는 한 외부에서 접속할 수 없습니다. 오로지 외부IP를 통해서만 접속이 가능하죠



제 공유기에 연결된 호스트가 3개라고 가정을 할때 3개모두 ssh를 작동중입니다.(3개 모두 ssh는 기본값인 22포트)



출처: https://wooooon.tistory.com/4 [취미로하자]
```

# 가상 네트워크
## Host-Only
* 외부와 단절된 내부 네트워크 구축하는 것으로 구성된 가상머신들끼리만 통신이 가능합니다.

## NAT(Network Address Translation)
* 호스트PC로부터 IP를 할당 받아 가상머신 프로그램이 자체 DHCP서버를 띄워 내부 네트워크 대역 할당 및 통신을 합니다. 호스트PC를 통해 외부 네트워크와 통신이 가능합니다.
- 즉, 사설 IP 주소로는 원칙적으로 외부와 통신할 수 없기 때문에 이를 공인 IP 주소로 중간에 변환해 주어 외부와 통신(인터넷 연결) 할 수 잇게 해주는 것입니다. 한가지 NAT는 장비가 아니라 기능 즉, 프로그램을 의미합니다. 그래서 라우터 등에 NAT 기능이 포함되어 있습니다. 흔히 NAT 기능이 포함된 라우터를 NAT 라우터라고 부릅니다.
- 우리가 주변에서 흔히 볼 수 있는 NAT 라우터로는 바로 인터넷 공유기가 있습니다. 공유기는 허브/스위치의 역할도 하면서 동시에 NAT 기능을 탑재하여 우리가 하나의 인터넷 회선으로(공인IP) 다수의 컴퓨터에서(내부 사설 IP) 동시에 인터넷을 사용할 수 있게 해주는 것 입니다. NAT 를 가장 쉽게 이해하시는 방법은
* NAT = 인터넷 공유기 라는 공식을 대입시키시면 됩니다.

## Bridge
* 공유기로부터 IP를 할당 받아, 호스트PC와 동일한 네트워크 대역의 IP를 갖게 됩니다. 공유기를 통해 외부 네트워크와 통신이 가능합니다.
* Host-only로 구성된 내부 네트워크 내의 가상머신4에 NAT연결선을 추가한 후 가상머신4를 게이트웨이로 사용하면, 가상머신1,2,3에서도 외부 네트워크로 접속할 수 있습니다. <포트 포워딩 필요>


## 포트 포워딩
```java
* 주로 하나의 IP주소를 이용하여 NAT형태를 취하는 공유기는 기본적으로 외부로부터 먼저 접근을 시도하는 모든 패킷에 대해 
거부하기 때문에 가장 기본적으로 보안이 이루어진다. 
* 대부분 인터넷을 공유기에 연결하여 사용하기 때문에 다운로드, 업로드, 웹서핑등과 같은 트래픽을 공유기에 연결된 
PC 먼저 시작하기 때문에 응답하여 돌아오는 패킷은 언제든지 들어올수 있다. 즉, 언제든 막혀있던 포트도 내부에서 먼저 요청하여 
저멀리 어떤 서버로 갔다가 돌아오는 패킷일지라도 공유기로 돌아오면 포트가 개방되어 들어올수 있다. 

반대로 외부에서 공유기에 연결된 내 컴퓨터를 먼저 접속하려고 하면 가능할까?

기본적으로 불가능하다. 

팀뷰어같이 내부에서 수락이나 동의를 해주는 경우라면 가능하다.

하지만, 아무런 동의를 하지 않은 상태에서는 외부에서 먼저 접속하려는 어떠한 패킷도 공유기 내부로 흘러들어가지 못한다.

만일 전통적으로 쉽게 구성가능한 FTP서버나 웹서버등을 공유기 밑에 만들어 놓고, 아무런 조치를 하지 않은 상태에서 외부에서
이 서버에 접속하면 당연히 접속이 되지 않는다. 이유는 바로 잘 알려진 서비스, 즉 이미 알려진 배일지라도 외부에서 
들어오는 배는 무조건 입항이 금지되어 있기 때문에 공유기에서 포트를 개방하지 않는한 외부로부터 공유기 밑단의 서버접속은 불가능하다.



따라서 이때 FTP, 웹서비스등과 같이 들어오는 배를 위해서 지정된 포트번호로 들어오도록 열어주면, 즉 공유기에서 개방해주면 
가능해지고, 이 작업이 바로 포트포워딩이다.


인터넷 자체가 서버-클라이언트의 개념에 충실했던 과거의 P2P형태를 보면, 서비스를 위해 특정포트가 지정된 애플리케이션이 많았다.

이러다보니, P2P파일송수신, 게임호스트등을 공유기에 연결된 PC에서 사용하는 경우, 포트포워딩이나 DMZ설정은 필수였다.



하지만, 최근 많은 애플리케이션은 서비인지 클라이언트인지 분간이 안될 정도로 클라이언트에서 실행하는 것만으로도 
양방향통신 상호인지 및 수락등이 너무 편리하게 되어 있어, 일일이 포트포워딩을 하지 않아도 수많은 애플리케이션들을 
사용하는데 큰 문제가 없다. 

대신 악성코드는 이러한 웹,메일,메신저등 내부사용자가 자주 사용하는 애플리케이션 어딘가 기생하다가 사용자가 인지하지 
못하고 클릭(동의)하는 순간 외부에서의 침입이 이루어지기 때문에 오히려 사용자가 더 주의해야 할 필요가 있게 되었다.
```
