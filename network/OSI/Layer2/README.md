# 데이터링크계층(브릿지, 스위치)
* 하나의 네트워크 대역, 즉 같은 네트워크 상에 존재하는 여러 장비들 중에서 어떤 장비가 어떤 장비에게 보내는 데이터를 전달 
 * + 추가적으로 오류제어(보내는 데이터에 오류가 없는지), 흐름제어(누가 누구에게 데이터 보내는지) 수행
* 다른 네트워크와 통신할 때는 항상 3계층이 도와주어야 한다.
- 송수신하는 정보가 안전하게 전달하도록 서비스하는 계층입니다. 
  이 계층에서는 MAC address 를 가지고 통신을 하며 전송 단위가 프레임이며 오류 검출과 흐름 제어를 통해 안전하게 도달하도록 합니다.

```java

브릿지
브릿지는 데이터링크계층에서 전송거리를 연장시켜주는 장치입니다. 단순 전기적 신호를 증폭시키는 것이 아닌 프레임을 다시 만들어 전송합니다.

허브, 리피터, 브릿지 차이
브릿지부터 무제한 길이확장이 가능하다.
브릿지는 이건 특별히 Datalink Layer(제 2 레이어)에서 동작한다. (맥 어드레스를 해석해서 처리하기 때문임.)
브릿지는 속도가 다른 두 네트워크 간도 연결할 수 있다.
브릿지는 망에서 생긴 잡음이 유지되지 않는다 (생기면 곧 사라짐. 잡음은 패킷 프레임이 아니기 때문에 브릿지에서 제거해 버린다.)


스위치
스위치는 브릿지와 마찬가지로 데이터링크계층에서 전송거리를 연장시켜주는 장치입니다. 
스위치는 성능에 따라 L2와 L3 L4 L7스위치로 구분되는데 단순히 MAC 주소만 참조하여 처리하는 장치를 L2 스위치라고 합니다
MAC 주소와 포트번호가 기록된 MAC 주소 테이블을 가지고 있어, 목적지 MAC 주소를 가진 장비가 연결된 포트로만 프레임을 
전송하기 때문에 충돌이 일어나지 않지만 MAC 주소가 브로드캐스트일 때 모든장비로 프레임을 전송하기에 성능저하가 일어납니다.


브릿지와 스위치의 차이
스위치는 Bridge 와 같은 레이어에서 동작하는 L2 스위치도 있지만, IP주소를 해석하여 동작하는 L3 스위치, 패킷정보를 해석하여 동작하는 L4 스위치도 있다.
데이터링크 계층에서 프레임을 전송하는 역할은 같으나, 브릿지에 비해 속도와 기능이 업그레드 된 것이 스위치입니다. 따라서 대부분 스위치를 사용하고 있습니다.
우리가 집에서 쓰는 것은 한 공인IP를 여러 사설아이피로 쓸 수 있게 해주는 “공유기“이고,
학교나 회사에서 여러 PC 를 연결하기 위해서, 같은 레벨(단계)에서 선을 분할 할 때 사용하는 것은 “허브” 이고, 
(벽에서 랜선 하나 연결해서 6포트 허브에 연결하면, 총 5대의 PC에 연결할 수 있게된다.)

패킷이 대량으로 통신하는 서버들을 연결하는 것은 “스위치“이다.
스위치가 가장 좋은 기기이긴한데, 서버 사용하는 경우 아니면 구매하지 않길 바란다.
비유하자면, 집앞 마트를 가는데, 공유기는 “자전거를 타고 가는 것”이고, 허브는 “킥보드를 타고 가는 것”이고, 스위치는 “람보르기니를 타고 가는 것”이다.
```

### 맥주소
* 물리적인 주소
* 앞에 6개의 16진수는 oui(IEEE에서 부여하는 일종의 제조회사 식별 id) + 뒤의 6개 16진수: 고유번호(제조사에서 부여한 번호)

```java
@ 신뢰성
물리적 계층을 통한 데이터 전송에 신뢰성을 제공한다.

이러한 서비스를 위해 물리적 주소(MAC) 지정, 네트워크 토폴로지, 오류통지, 프레임의 순차적 전송, 흐름제어 등의 기능을 가진다.

직접 연결되어 있지 않은 네트워크에 대해서는 상위 계층에서 오류 제어를 담담한다.

두가지 하위 게층이 존재한다.
Logical Link Contorl - 통신 장치간의 연결을 설정하고 관리하는 책임
Media Access Control - 다중 장치가 같은 미디어 채널을 공유, 제어(Block ID + Device ID)
2계층 장비 : Switch, Bridge
```

### 이더넷 프로토콜
* LAN에서 통신할 때 사용하는 이더넷 프로토콜
* Destination Address(목적지), Source Address(출발지), Ethernet Type, Data
 * Ethernet Type(데이터; 즉 페이로드 안에 어떤 것이 들어있는 지 알려주는 것)
* 다른 대역이랑 통신할 때 첫 이더넷 프로토콜 목적지 주소는 본인 라우터의 게이트웨이 주소이다.
 * 이더넷 프로토콜은 네트워크 대역이 바뀔 때마다 새로 작성이 된다.
  * 내 라우터 - 상대 라우터 - 단말기
```java
이더넷에서 프레임을 만든다.
1,2계층에서 필수불가결한 규격이 이더넷이다.

유선 네트워크의 경우 거의 대부분이 이더넷을 사용하고 있다 생각해도 좋다.

컴퓨터가 데이터를 송신할 때는
자신의 MAC 주소를 출발지 MAC 주소
데이터를 보낼 상대방의 MAC 주소를 목적 MAC 주소로 하여
헤더에 넣어 프레임을 만든다.

이더넷은 3계층으로부터 받은 데이터(패킷)에
프레임의 처음을 나타내는 프리앰블(Preamble과
목적지(수신자)와 출발지(송신자)를 나타내는 헤더,
비트 오류 체크에 사용하는 FCS(Frame Check Sequence)를 추가하여 프레임을 만든다.
```

#### MAC 주소로 컴퓨터를 식별한다.
```java
이더넷은 48비트로 된 MAC 주소라는 식별자를 사용하여 컴퓨터를 식별
a8:66:7f:04:00:80 / 00-50-56-c0-00-01

위와 같이 8비트마다 하이픈 or 콜론으로구분하여 16진수로 표기

상위 24비트 : 제조업체별로 할당한 제조업체 코드 = OUI(Organizationally Unique Identifier)

OUI를 통해 기기의 제조업체를 알 수 있다.

하위 24비트 : 제조업체 내부에서 기기별로 고유한 값으로 할당한 코드
```
