# [물리계층(리피터, 허브)](https://www.youtube.com/watch?v=HkiOygWMARs&list=PL0d8NnikouEWcF1jJueLdjRIC4HsUlULi&index=2)

# 랜카드
- 네트워크 연결 및 데이터 전송은 랜카드(LAN card)로부터 시작된다. 랜카드는 ‘네트워크 카드(network card)’ 또는 ‘네트워크 인터페이스 컨트롤러(network interface controller, NIC)’, ‘네트워크 어댑터(network adapter)’ 등으로 부르지만, ‘랜카드’라는 이름이 국내 사용자들 사이에서 통용되고 있다(여기서 랜-LAN은 ‘Local Area Network’, ‘로컬 영역 연결’을 말한다).


- 편하게 말하면 랜카드가 컴퓨터에 설치되어 있어야 바로 랜선이 꽂히는 포트가 생기는데요. 요즘은 대체적으로 메인보드에 내장되어 있습니다.  위 사진의 넷메이트 N-313 랜카드처럼 내장령 랜카드가 아닌 메인보드 PCI Express 슬롯에 장착하는
메인보드형 랜카드가 있으며,  요즘 많이 사용하는 내장형 랜카드가 고장나거나  컴퓨터를 업그레이드 할 때 기존 내장형 랜카드가 새 부품과 맞지 않는 일이 생기거나   인터넷 속도가 느려서 보니 랜선이나 ﻿통신사 라인 문제가 아니라 랜카드 성능이 떨어져서 느릴 경우 메인보드형 랜카드(N-313은 기가비트 속도 지원)로 교체해서 문제를 해결할 수가 있습니다.﻿
- 랜카드는 개방형 시스템 네트워크 통신을 위한 국제 표준인 OSI(Open Systems Interconnection) 7계층 모델 중 가장 하위 단계인 ‘물리적 계층(Physical layer)’에 속하는 기기로, 네트워크를 통한 데이터 전송 및 수신의 역할을 담당한다. 즉 한 컴퓨터에서 처리된 데이터를 전기 신호로 변환해 네트워크 내 다른 컴퓨터로 전송하고, 이 전기 신호를 수신해 다시 컴퓨터가 처리할 수 있는 데이터로 변환하는 역할이다.
-

## 랜카드 종류
- 또한 랜카드는 네트워크 유형 또는 형태에 따라 이더넷(Ethernet/Fast Ethernet)용, 기가비트 이더넷(Gigabit Ethernet)용, 토큰링(Token ring)용 등으로 구분되는데, 여기서는 일반적인 개인용 컴퓨터(PC) 유선 네트워크에 사용되는 이더넷 및 기가비트 이더넷용 랜카드에 대해서만 언급한다.
- 랜카드의 종류는 PC에 랜선을 연결해서 통신을 하는 유선랜카드와 랜선 연결 없이 와이파이로 연결해서 사용하는 무선 랜카드가 있습니다. 무선랜(wireless LAN)은 말 그대로 해당 기기(랜카드)가 있는 곳 주변의 일정 영역에서 랜선(LAN Cable)없이도
- 통신(인터넷)이 가능하도록 하는 기능입니다. 물론 무선랜이 가능한 랜카드를 설치하면 사용할 수 있습니다. 랜카드의 형태는 다양한데, 요즘 많이 사용되는 랜카드는 PC 내장형 이외에 USB형 랜카드가 있습니다. 크롬북 사용기에서도 잠깐 소개했었는데요. USB 포트에 꽂아 랜포트를 만들어주는 기기입니다.


## 랜카드 구조
- 랜카드 전면부에는 랜케이블을 꽂을 수 있는 단자(RJ-45 커넥터)와 네트워크 연결(Link) 및 통신 상태(Act)를 보여주는 LED(발광다이오드)가 달려 있다. 통신 가능한 랜케이블을 꽂으면 연결 상태 LED가 켜지며, 네트워크로 데이터가 전송/수신됨에 따라 통신 상태 LED가 깜박거린다. 따라서 이 LED 상태를 육안으로 확인하고 랜카드와 케이블 연결 상태를 1차적으로 점검할 수 있다.
 - 이러한 이더넷 랜카드는 일반적으로 최대 전송속도에 따라 10Mbps(mega-bit per second), 100Mbps(패스트, fast), 1000Mbps(1Gbps, giga-, 기가비트)로 나뉜다. 이를 MB로 환산하면 각각 초당 약 2.5MB, 12.5MB, 125MB로 전송되는 셈이다. 물론 이는 어디까지나 이론적 최대 수치이며, 여기에 네트워크 상태와 신호감쇠 현상 등이 작용하여 평균적으로 약 30% 정도 전송속도가 저하된다. 최근 출시되는 랜카드나 메인보드 내장 랜카드는 대개 10/100/1000Mbps 속도를 모두 지원하고 있다. 다만 랜카드가 1000Mbps 속도를 지원해도 랜케이블이나 스위치/라우터 등의 네트워크 장비가 이를 지원하지 않으면 기가비트 속도를 만끽할 수 없다.
- 참고로 전송속도 외에 전송매체, 즉 랜케이블의 유형에 따라서도 랜카드가 구분된다. 현재 일반적으로 사용되는 UTP(Unshielded Twisted-Pair) 케이블과 연결되면 BaseT, TV 안테나 케이블처럼 생긴 콕시얼(coxial) 케이블과 연결되면 Base2(씬넷-thin net), 모니터 케이블과 비슷한 케이블에 연결되면 Base5(씩넷-thick net), 광섬유 케이블과 연결되면 BaseF로 각각 나뉜다. 이에 따라 10/100/1000Mbps 속도를 모두 지원하며 일반적인 UTP 랜케이블을 사용하는 랜카드라면 ‘10/100/1000BaseT’ 규격이라 표기한다. 현재 콕시얼 랜케이블은 구형이라 거의 사용되지 않으며, 광섬유 랜케이블은 기업형 전산망에 주로 적용되고 있다.

## 맥주소
- 랜카드의 ‘주민등록번호’ - MAC 주소
전세계 네트워크로 연결된 모든 컴퓨터에는 (카드형이든 메인보드 내장형이든) 랜카드가 하나 이상은 장착돼 있다. 그리고 세상의 모든 랜카드에는 고유의 식별 코드가 들어 있는데, 이를 MAC 주소(MAC-Media Access Control Address)라 한다. 사람으로 치면 주민등록번호에 해당되는 MAC 주소 때문에 네트워크를 통해 데이터가 출발지에서 목적지까지 정확하게 도착할 수 있다.
- 랜카드의 MAC 주소는 두 자리의 영문자+숫자가 여섯 쌍으로 이뤄진다. 예를 들어, ‘E0-68-92-65-BC-61’과 같은 식(12자, 총 48비트)이다. 이 중 왼쪽에서 3쌍, 즉 ‘E0-68-92’는 랜카드(정확히는 랜 칩셋) 제조사를 의미하는 고유 코드다. 랜 칩셋의 주요 제조사로는 인텔(intel), 리얼텍(Realtek) 등이 있다. 한편 오른쪽에서 3쌍, 즉 ’65-BC-61’은 해당 랜카드의 고유 번호가 된다.
- 이러한 랜카드의 MAC 주소는 흔히 인터넷 서비스 제공사에서 가입자마다 인터넷 회선을 고정하는데 사용되곤 한다. 평소 인터넷을 사용하던 PC를 새로 교체한 후 인터넷 연결이 안 된다면 이는 십중팔구 인터넷 서비스 제공사에 처음 등록된 사용자 PC의 MAC 주소가 다르기 때문이라 짐작할 수 있다. 이런 경우 해당 인터넷 서비스 제공사에 전화 문의하여 PC(즉 랜카드의 MAC 주소)가 교체되었음을 고지하면 된다.
- 참고로 랜카드의 MAC 주소는 MS 윈도우 운영체계의 명령 프롬프트에서 ‘ipconfig /all’ 명령을 수행하여 확인할 수 있다. 윈도우 운영체계에서는 ‘물리적 주소’라 표기하고 있다. 앞서 언급한 대로 랜카드는 OSI 7계층 모델의 물리적 계층에 속하기 때문이다.

## 기본적인 랜카드 설정 및 점검법
- PC에 설치된 랜카드에 문제가 발생하면 PC 부팅 및 기본 사용에는 지장이 없으나 인터넷 접속은 불가능해 진다. 이런 경우 인터넷 상태의 문제인지 PC의 랜카드 또는 랜케이블과의 연결 문제인지를 우선 파악하는 것이 중요하다.
- 우선 랜카드의 연결 상태(Link) LED가 점등되어 있는지 확인한다. 꺼져 있다면 랜케이블을 뽑았다 끼워 점등 상태를 다시 확인한다. 그래도 점등되지 않는다면 랜케이블의 단선 또는 인터넷 서비스 제공사 측의 이상으로 판단할 수 있다. 물론 랜카드의 문제일 수도 있다. 윈도우의 명령 프롬프트를 실행해 ‘ping’ 명령어를 통해 ‘ping localhost’ 또는 ‘ping 127.0.0.1’라 입력하여, 아래 그림처럼 정상적인 ping 응답 결과가 나타나는지 확인한다. 정상이라면 적어도 랜카드 설정 및 구성(드라이버 설치 상태 등)에는 문제가 없는 것으로 판단할 수 있다.


## 물리계층
- 통신케이블을 통해 데이터를 전송하는 계층입니다. 통신 단위는 bit 이며 데이터를 전송하기만 할뿐 무슨 데이터인지는 신경을 쓰지 않습니다.
```java
네트워크 통신을 위한 물리적인 표준을 정의하는 계층이다.

두 컴퓨터 간의 전기적, 기계적, 절차적인 연결을 정의하는 계층이다.

케이블 종류, 데이터 송수신 속도, 신호의 전기 전압 등
```



# 도메인(domain)
- 컴퓨터간 통신을 하기위해 고유숫자인 ip 를 통해 통신을 하게 되는데 숫자로만 이루어진 ip 는 사람들이 이해하거나 외우기가 어렵기에 편하게 쓰기위해 ip 별로 고유이름을 부여한 것이 도메인입니다.

## IP Address와 MAC Address
- IP address 는 인터넷 네트워크 상의 고유 주소이고 라우팅시에 필요합니다. MAC address 는 장치의 고유 번호로서 통신시 상대방 컴퓨터를 찾아내기 위해 필요한 주소입니다. 따라서 인터넷에 접속하여 네트워크 통신을 할때 상대방이 접속한 인터넷 망까지 IP address 를 통해 찾아가고, MAC address 를 통해 망에 접속된 장치 중 알맞는 장치에 도착할 수 있습니다.

## ARP (Address Resolution Protocol) 와 RARP에 대해 설명
- ARP 는 OSI 7계층의 네트워크 계층에서 사용되는 주소 결정 프로토콜로서 IP 주소에서 MAC 주소를 알아내기 위한 프로토콜이고, RARP 은 반대로 MAC 주소에서 IP 주소를 알아내기 위한 프로토콜입니다. 상대방 MAC 주소를 모를 경우 IP와 브로드 캐스팅 네트워크 주소 FFFFFFFFFFFF를 가지는 ARP 패킷을 네트워크 상에 전송하여 이를 수신한 호스트가 자신의 MAC 주소를 반송하는 메커니즘입니다. 이때 ARP 캐시라 불리는 메모리에 테이블 형태로 저장하여, 패킷을 전송할 때에 다시 사용됩니다.

# 리피터, 허브, 브릿지, 라우터와 L2, L3, L4, L7 스위치 차이점
## 리피터
- 리피터는 물리계층에서 단순히 전기적인 신호만 증폭시키는 장치입니다. 네트워크 신호가 연결된 모든 PC에 전달되기 때문에 연결된 장치가 많을수록 부하가 심해집니다.

## 허브
- 허브는 리피터처럼 물리계층에서 전기적인 신호를 증폭시켜 전송거리를 연장시켜주는 장치입니다. 
플러딩으로 인해 네트워크 장치가 많을수록 부하가 심해지고, 잡음 신호고 증폭된다는 단점이 있습니다.

## 인텔리전트 허브
```java
허브의 종류는 두가지가 있는데 인텔리전트 허브와 더미 허브이다 굳이 하나 더 나누면 세미인텔리전트 허브도 있다

 

이 두가지를 나누는 가장 중요한 요소로는 NMS(네트워크 관리시스템)를 통해서 관리가 되는가 이다 즉 인텔리전트 허브는
 NMS 상에서 모든 데이터를 분석할 수 있을 뿐 아니라 제어도 가능하다 말 그대로 앉아서 멀리 있는 허브의 동작을 감시하고
 조정까지도 할 수 있다 물론 대규모 시스템에 적합한것은 분명하다 가격이 비싸기 때문이다

 

이렇게 비싸도 사용하는 이유는 만약 한 PC에 문제가 발생해서 이상한 데이터를 허브로 끊임없이 보내게 된다면 콜리전이 발생하게 
되고 다른 PC들의 통신이 불가능해 진다 이 경우 문제의 PC를 찾아서 해결해야 하는데 인텔리전트 허브의 경우 문제의
PC가 연결된 포트를 찾아내서 자동으로 Isolation(고립)시켜 버린다 즉 문제가 되는 포트를 방출시켜 버리는 것이다
따라서 문제의 PC는 통신이 안되지만 나머지 PC들은 정상기동할 수 있는 것이다

 

분리된 포트는 허브에서 램프로 표시되기 때문에 바로 어떤 PC인지 알게 되고 이 기능을 Auto Partition이라 한다
이 기능은 더미 허브에도 있는 경우가 있다.

 

허브중에 Stackable허브라는 것이 있다 이것은 스택이 가능한 허브 즉 쌓을 수 있는 허브를 말한다

 

허브의 상태를 웹 브라우저를 통해서 그대로 확인할 수 있을 뿐 아니라 포트의 상태나 데이터 양의 감시까지도 가능하다
물론 이 경우에는 허브 관리에 필요한 값들을 세팅해주어야 한다 관리용 IP 주소라든지 암호, 관리 옵션등을 넣어주어야
멀리 떨어진 곳에서도 관리가 가능하게 된다 이런 관리 기능을 제공해 주는 허브를 인텔리전트 허브라고 한다
```

### 플러딩
- 네트워크 장치에서 신호를 보내면 연결되어 있는 모든 장치들에서 신호를 전송하는 방식을 말합니다. 따라서 보안성이 약하고, 네트워크 충돌 문제가 발생할 수 있습니다.

## 허브와 리피터의 차이
- 허브는 리피터에 몇가지 기능이 추가된 것으로 패킷 모니터링과 멀티 포트를 지원하여 문제가 생긴곳을 고립시킬 수 있습니다.
*  허브는 패킷모니터링이 가능하다.
  - 멀티 포트를 지원하며 문제가 생긴 곳을 고립(Fault isolation)시킬 수 있다.

## 브릿지
- 브릿지는 데이터링크계층에서 전송거리를 연장시켜주는 장치입니다. 단순 전기적 신호를 증폭시키는 것이 아닌 프레임을 다시 만들어 전송합니다.

### 허브, 리피터, 브릿지 차이
* 브릿지부터 무제한 길이확장이 가능하다.
* 브릿지는  이건 특별히 Datalink Layer(제 2 레이어)에서 동작한다. (맥 어드레스를 해석해서 처리하기 때문임.)
* 브릿지는 속도가 다른 두 네트워크 간도 연결할 수 있다.
* 브릿지는 망에서 생긴 잡음이 유지되지 않는다 (생기면 곧 사라짐. 잡음은 패킷 프레임이 아니기 때문에 브릿지에서 제거해 버린다.)

## 스위치
- 스위치는 브릿지와 마찬가지로 데이터링크계층에서 전송거리를 연장시켜주는 장치입니다. 스위치는 성능에 따라 L2와 L3 L4 L7스위치로 구분되는데 단순히 MAC 주소만 참조하여 처리하는 장치를 L2 스위치라고 합니다. MAC 주소와 포트번호가 기록된 MAC 주소 테이블을 가지고 있어, 목적지 MAC 주소를 가진 장비가 연결된 포트로만 프레임을 전송하기 때문에 충돌이 일어나지 않지만 MAC 주소가 브로드캐스트일 때 모든장비로 프레임을 전송하기에 성능저하가 일어납니다.

### 브릿지와 스위치의 차이
- 스위치는 Bridge 와 같은 레이어에서 동작하는 L2 스위치도 있지만, IP주소를 해석하여 동작하는 L3 스위치, 패킷정보를 해석하여 동작하는 L4 스위치도 있다.
- 데이터링크 계층에서 프레임을 전송하는 역할은 같으나, 브릿지에 비해 속도와 기능이 업그레드 된 것이 스위치입니다. 따라서 대부분 스위치를 사용하고 있습니다.
* 우리가 집에서 쓰는 것은 한 공인IP를 여러 사설아이피로 쓸 수 있게 해주는 “공유기“이고,
* 학교나 회사에서 여러 PC 를 연결하기 위해서, 같은 레벨(단계)에서 선을 분할 할 때 사용하는 것은 “허브” 이고, (벽에서 랜선 하나 연결해서 6포트 허브에 연결하면, 총 5대의 PC에 연결할 수 있게된다.)
* 패킷이 대량으로 통신하는 서버들을 연결하는 것은 “스위치“이다.
* 스위치가 가장 좋은 기기이긴한데, 서버 사용하는 경우 아니면 구매하지 않길 바란다.
* 비유하자면, 집앞 마트를 가는데, 공유기는 “자전거를 타고 가는 것”이고, 허브는 “킥보드를 타고 가는 것”이고, 스위치는 “람보르기니를 타고 가는 것”이다.


### 공유기
* 요즘 출시되는 공유기는 웹서버, 토렌트 다운로드, vpn 서버 등 다양한 기능을 제공하고 있습니다.
* Application Layer(L7) 기능을 제공하고 있기 때문에, 포트가 여러개 달린 컴퓨터라고 보는게 맞는 것 같습니다.
* 다만 공유기 기능 중 하나인 허브모드 기능을 사용하여 허브처럼(!) 사용할 수도 있습니다.

### 스위치가 속도가 더 빠른 이유
- 데이터 처리 방식에 있어서 브릿지는 소프트웨어적으로만 처리하는 반면 스위치는 하드웨어적으로 처리가 가능하여 속도가 월등히 빠릅니다.

### L3 스위치
- L2 스위치에서 접속된 장비가 많을수록 브로드캐스트 트래픽이 증가하는 문제를 해결하기 위해 VALN이 도입되었고, 이 기술을 적용한 장치가 L3 스위치입니다. VLAN이 다르면 브로드캐스트 프레임이 차단하여 성능저하를 해결할 수 있습니다. 네트워크 계층에서 사용되는 장치입니다.

### L4, L7 차이점
- L4 스위치는 전송계층에서 작동하는 스위치로서 ip 주소를 통해 호스트종단으로 전송하는 것 뿐만 아니라 포트번호에 맞는 서버로 패킷을 전송하여 분산처리가 가능하다는 장점이 있습니다. L7 스위치는 응용계층에서 작동하는 스위치로서 L4 스위치보다 한단계 더 높이 패킷의 url, 쿠키, payload 일부분을 읽어서 더욱 세밀한 분산 처리를 도울 수 있는 장점이 있습니다.
### 라우터란

- 라우터는 네트워크 계층에서 IP주소를 이용해 목적지 포트로 패킷을 전송하는 장치입니다. 특히 서브넷이 다른 IP주소를 가진 장비간 통신은 이 네트워크 계층 장비를 거쳐야 합니다.

