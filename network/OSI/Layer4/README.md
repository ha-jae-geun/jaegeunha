# [전송 계층](https://www.youtube.com/watch?v=tG0ldt4sBzY&list=PL0d8NnikouEWcF1jJueLdjRIC4HsUlULi&index=13)
```java
[2019년 국가직9급 컴일반]
문 7. UDP(User Datagram Protocol)에 대한 설명으로 옳은 것만을 모두 고르면? 3
ᄀ. 연결 설정이 없다.
ᄂ. 오류검사에 체크섬을 사용한다.
ᄃ. 출발지 포트 번호와 목적지 포트 번호를 포함한다.
ᄅ. 혼잡제어 메커니즘을 이용하여 링크가 과도하게 혼잡해지는 것을 방지한다.
1 ᄀ, ᄂ 2 ᄀ, ᄃ
3 ᄀ, ᄂ, ᄃ 4 ᄂ, ᄃ, ᄅ
[해설]
- 혼잡제어(Congestion Control)는 TCP의 역할이다. 혼잡제어는 통신망의 특정 부분에 트래픽이 몰리는
것이 방지하는 것을 말한다. 즉, 송신된 패킷이 네트워크상의 라우터가 처리할 수 있는 양을 넘어서
혼잡하게 되면 데이터가 손실될 수 있기 때문에 송신측의 전송량을 제어하게 된다.


데이터 통신 시스템에서 발생하는 에러를 제어하는 방식으로 송신측이 오류를 검출할 수 
있을 정도의 부가적인 정보를 프레임에 첨가하여 전송하고 수신측이 오류 검출 시 재전송을 요구하는 방식은? 1번
① ARQ(Automatic Repeat reQuest)
② FEC(Forward Error Correction)
③ 순회 부호(cyclic code)
④ 해밍 부호(Hamming code)


ARQ(Automatic Repeat reQuest, 자동 반복 요청)
· 통신 경로에서 오류 발생 시 수신측은 오류의 발생을 송신측에 통보하고, 송신측은 오류가 발생한 프레임을 재전송하는 방식이다.
· 재전송 요구를 위한 역채널이 필요하다.
· 전송 중인 메시지를 저장할 버퍼 기억장치가 필요하다.
```

- 데이터의 전송을 위한 논리적인 연결을 하는 대문같은 역할을 합니다. 신뢰성 있는 전송을 보장하기 위해 오류 검출 및 복구와 흐름 제어를 제공합니다.
* 송신자의 프로세스와 수신자의 프로세스를 연결하는 통신 서비스
* 전송계층은 연결 지향 데이터 스트림 지원, 신뢰성, 흐름 제어, 다중화와 같은 편리한 서비스 제공
* 포트번호, 프로그램의 연결 정보

```java
정보를 분할하고, 상대편에 도달하기 전에 다시 합치는 과정을 담당하는 계층이다.

4계층의 단위 : Segment

목적지 컴퓨터에서 발신지 컴퓨터 간의 통신에 있어 흐름제어, 혼잡 제어, 오류제어를 담당한다.

전송 방식을 결정한다.
EX) 포트번호나 TCP/UDP 등

4계층 프로토콜 : TCP, UDP

TCP - 신뢰성, 비 연결지향성 프로토콜, Connection-ful(연결을 유지하며 전송하는 방식)
UDP - 비 신뢰성, 비 연결지향성 프로토콜, Connection-less(연결을 유지하지 않고 전송하는 방식, Data 손실을 신경쓰지 않음)
```

# 포트 번호
* 특정 프로세스와 특정 프로세스가 통신을 하기 위해 사용한다.
* 하나의 포트는 하나의 프로세스만 사용 가능하다.
* 하나의 프로세스가 여러 개의 포트를 사용하는 것은 가능하다.
* 포트 번호는 일반적으로 정해져 있지만 무조건 지켜야 하는 것은 아니다.
* 예를 들어 웹서비스는 80번 포트를 사용하지만 웹 서비스가 항상 80번 포트를 사용해야만 하는 것은 아니다.

## Well-known 포트
* 전 세계적으로 유명한 포트(0~1024)
* 잘 알려진 것이지 절대적인 것은 아니다.
* FTP: 20, 21
* SSH: 22
* TELNET: 23
* DNS: 53
* DHCP: 67, 69
* TFTP: 69
* HTTP: 80; 웹 서버 프로토콜
* HTTPS: 443

## Registered 포트
* 조금은 유명한 포트(1024 ~ 49152)
* 오라클 DB서버: 1521번
* MYSQL: 3306번
* MS 원격 데스크탑: 3389번


## Dynamic 포트
* 일반 사용자들이 사용하는 포트
* 시작 포트 번호: 49152,  마지막 포트 번호: 65535

## 나와 현재 연결되어있는 컴퓨터들
* 현재 포트 활성 여부를 나타내는 활성 연결 테이블
* nentstat -ano




# [UDP 프로토콜(User/Universal Datagram Protocol)](https://www.youtube.com/watch?v=3MkI3FBFzX8&list=PL0d8NnikouEWcF1jJueLdjRIC4HsUlULi&index=16)
* 사용자 데이터그램 프로토콜은 유니버셜 데이터그램 프로토콜이라고 일컫기도 한다.
* UDP의 전송 방식은 너무 단순해서 서비스의 신뢰성이 낮고, 데이터그램 도착 순서가 바뀌거나, 중복되거나 심지어는 통보 없이 누락시키기도 한다.
* UDP는 일반적으로 오류의 검사와 수정이 필요 없는 프로그램에서 수행할 것으로 가정한다.
* 용량이 큰 파일은 UDP로 전송하지 않는다.
```java
비연결형 서비스로 데이터그램 방식을 제공한다

정보를 주고 받을 때 정보를 보내거나 받는다는 신호절차를 거치지 않는다.

UDP헤더의 CheckSum 필드를 통해 최소한의 오류만 검출한다.

신뢰성이 낮다

TCP보다 속도가 빠르다


UDP는 비연결형 서비스이기 때문에, 연결을 설정하고 해제하는 과정이 존재하지 않습니다. 서로 다른 경로로 독립적으로

처리함에도 패킷에 순서를 부여하여 재조립을 하거나 흐름 제어 또는 혼잡 제어와 같은 기능도 처리하지 않기에 TCP보다

속도가 빠르며 네트워크 부하가 적다는 장점이 있지만 신뢰성있는 데이터의 전송을 보장하지는 못합니다. 그렇기 때문에

신뢰성보다는 연속성이 중요한 서비스 예를 들면 실시간 서비스(streaming)에 자주 사용됩니다.


[ UDP 서버의 특징 ]
UDP에는 연결 자체가 없어서(connect 함수 불필요) 서버 소켓과 클라이언트 소켓의 구분이 없다.

소켓 대신 IP를 기반으로 데이터를 전송한다.

서버와 클라이언트는 1대1, 1대N, N대M 등으로 연결될 수 있다.

데이터그램(메세지) 단위로 전송되며 그 크기는 65535바이트로, 크기가 초과하면 잘라서 보낸다.

흐름제어(flow control)가 없어서 패킷이 제대로 전송되었는지, 오류가 없는지 확인할 수 없다.

파일 전송과 같은 신뢰성이 필요한 서비스보다 성능이 중요시 되는 경우에 사용된다.
```

```java
 IP 데이터그램을 캡슐화하여 보내는 방법과 연결 설정을 하지 않고 보내는 방법을 제공한다. 
 UDP는 흐름제어, 오류제어 또는 손상된 세그먼트의 수신에 대한 재전송을 하지 않는다. 
 이 모두가 사용자 프로세스의 몫이다. UDP가 행하는 것은 포트들을 사용하여 IP 프로토콜에 인터페이스를 제공하는 것이다.

종종 클라이언트는 서버로 짧은 요청을 보내고, 짧은 응답을 기대한다. 만약 요청 또는 응답이 손실된다면, 
클라이언트는 time out 되고 다시 시도할 수 있으면 된다. 
코드가 간단할 뿐만 아니라 TCP 처럼 초기설정(initial setup)에서 요구되는 프로토콜보다 적은 메시지가 요구된다.

UDP를 사용한 것들에는 DNS가 있다. 어떤 호스트 네임의 IP 주소를 찾을 필요가 있는 프로그램은, 
DNS 서버로 호스트 네임을 포함한 UDP 패킷을 보낸다. 이 서버는 호스트의 IP 주소를 포함한 UDP 패킷으로 응답한다. 
설정이 필요하지 않으며 그 후에 해제가 필요하지 않다.
```

## UDP 프로토콜 구조
* 소스 포트(2) + Destination Port(2) + Length(2) + CheckSUm(2)
```java
1. Source Port Number : 송신 포트번호 (포트번호를 사용해서 상위 단계 프로그램들을 식별한다)

2. Destination Port Number : 수신 포트번호

3. UDP length : UDP헤더와 데이터를 합친 길이

4. UDP checksum : UDP헤더와 데이터를 모두 포함하여 체크한다.


```

## DNS 서버
* UDP 프로토콜을 사용하는 대표적인 프로그램
* 도메인을 물으면 IP를 알려주는 서버

## [tftp 서버](https://www.youtube.com/watch?v=5Woau-EJChw&list=PL0d8NnikouEWcF1jJueLdjRIC4HsUlULi&index=17)
* UDP로 파일을 공유하는 서버

## RIP 프로토콜
* 라우팅 정보를 공유하는 프로토콜

## HTTP3
* [Http3.0](https://github.com/ha-jae-geun/jaegeunha/blob/master/network/HTTP/README.md)

