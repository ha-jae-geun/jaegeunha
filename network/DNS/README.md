# DNS
## DNS 서버의 역할
```java
인터넷에서는 컴퓨터를 식별하기 위해 IP 주소를 사용

하지만 이 숫자만으로는 무엇에 사용되고 있는지 알 수 없다.

그래서 인터넷에서는 IP 주소에 도메인명이라는 이름을 붙혀 알기 쉽게 한다.

IP 주소와 도메인명을 서로 교환하는 장치를 DNS(Domain Name System)이라 한다.

도메인명은 트리 구조로 되어 있다.
도메인명은 ‘www.examaple.co.kr’과 같이 점으로 구분된 문자열로 구성되어 있다.

이 하나하나의 문자열을 라벨이라고 하며,
오른쪽부터 순서대로 ‘탑레벨 도메인’, ‘제 2레벨 도메인’, ‘제 3레벨 도메인’과 같이 부른다.

즉 트리 모양의 계층 구조로 되어 있다.
```

## DNS 종류
```java
DNS 서버는 2종류
DNS 서버는 캐시 서버와 콘텐츠 서버로 크게 나눈다.

캐시 서버는 LAN 안에 있는 클라이언트로부터 조회를 받아 클라이언트를 대신하여 인터넷에 조회해 주는 DNS 서버
클라이언트가 인터넷에 Access할 때 사용
콘텐츠 서버는 외부 호스트로부터 자신이 관리하는 도메인에 관한 조회를 받는 DNS 서버
자신의 도메인 내의 호스트명은 zone 파일이라는 DB에서 관리

 
클라이언트로부터 조회를 받은 캐시 서버는 받은 도메인명을
오른쪽부터 순서대로 검색하여 해당 도메인명을 관리하는 콘텐츠 서버를 찾는다.
거기까지 도달하면 해당 콘텐츠 서버에 대해 호스트명+도메인명에 대응하는 IP주소를 가르쳐 준다.
이러한 동작을 이름 해결이라 한다.
```

## DNS 서버의 이중화
* DNS 서버는 인터넷을 보이지 않는 곳에서 지지해 주는 중요한 서버이다.
* DNS 서버에서 도메인명을 이름 해결할 수 없으면 목적하는 웹 서버에 Access할 수 없다.
* 그래서 DNS 서버는 단독 구성이 아니라 프라이머리 DNS 서버와 세컨더리 DNS 서버와 같이 이중 구성으로 구축하는 것이 기본이다.

## 캐시 서버의 이중화
* LAN에 배치하는 캐시 서버는 클라이언트가 조회한 이름 해결 정보를 캐시할 뿐이다.
* 따라서 프라이머리 DNS 서버와 세컨더리 DNS 서버에서 특별한 이중화 설정을 할 필요가 없다.
* 프라이머리 DNS 서버로부터 Response가 오지 않으면 세컨더리 DNS에게 다시 조회한다.

## 콘텐츠 서버의 이중화
* 콘텐츠 서버는 도메인명에 관한(zone 파일)을 저장하는 중요한 서버이다.
* 만일 프라이머리 DNS 서버가 다운되어도 세컨더리 DNS 서버가 동일한 정보를 반환할 수 있도록
* 동일한 zone 파일을 저장해 둘 필요가 있다.
* 이것은 프라이머리 DNS 서버에서 세컨더리 DNS 서버로 zone 전송을 하여 zone 파일을 동기화한다.
* 정기적 or 임의의 타이밍에 zone 파일을 동기화한다.
